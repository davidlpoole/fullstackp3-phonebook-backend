(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(16),c=n.n(a),r=n(7),o=n(3),u=n(1),i=n(4),l=n.n(i),d="/api/people",s={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e).then((function(e){return e.data}))},update:function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},b=(n(40),n(0)),f=function(e){var t=e.htmlFor,n=e.label,a=e.type,c=e.value,r=e.onChange;return Object(b.jsxs)("div",{className:"input",children:[Object(b.jsx)("label",{htmlFor:t,children:n}),Object(b.jsx)("input",{type:a,id:t,value:c,onChange:r})]})},j=function(e){var t=e.onSubmit,n=e.newName,a=e.handleNameChange,c=e.newNumber,r=e.handleNumberChange;return Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsx)(f,{htmlFor:"name",label:"Name: ",type:"text",value:n,onChange:a}),Object(b.jsx)(f,{htmlFor:"number",label:"Number: ",type:"text",value:c,onChange:r}),Object(b.jsx)("button",{className:"add",type:"submit",children:"Add"})]})},m=function(e){var t=e.person,n=e.onDelete;return Object(b.jsxs)("li",{children:[t.name," ",t.number,Object(b.jsx)("button",{className:"delete",onClick:function(){return n(t.id)},children:"Delete"})]},t.id)},h=function(e){var t=e.people,n=e.onDelete;return Object(b.jsx)("ul",{children:t.map((function(e){return Object(b.jsx)(m,{person:e,onDelete:n},e.id)}))})},p=function(e){var t=e.text;return Object(b.jsx)("h2",{children:t})},O=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(u.useState)(""),i=Object(o.a)(c,2),l=i[0],d=i[1],m=Object(u.useState)(""),O=Object(o.a)(m,2),v=O[0],x=O[1],g=Object(u.useState)(""),y=Object(o.a)(g,2),w=y[0],N=y[1],C=Object(u.useState)(null),S=Object(o.a)(C,2),k=S[0],D=S[1],A=Object(u.useState)("neutral"),F=Object(o.a)(A,2),E=F[0],T=F[1];Object(u.useEffect)((function(){s.getAll().then((function(e){a(e)}))}),[]);var J=n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})),L=function(e,t){T(t),D(e),setTimeout((function(){D(null),T("neutral")}),5e3)},B=function(e){var t=e.message,n=e.type;return null===t?null:Object(b.jsx)("div",{className:"notification",style:{color:{neutral:"black",good:"green",bad:"red"}[n]},children:k})};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Phonebook"}),Object(b.jsx)(p,{text:"Add new"}),Object(b.jsx)(B,{message:k,type:E}),Object(b.jsx)(j,{onSubmit:function(e){if(e.preventDefault(),!1===n.map((function(e){return e.name})).includes(l)){var t={name:l,number:v};s.create(t).then((function(e){a(n.concat(e)),L("Added ".concat(e.name),"good"),d(""),x("")}))}else{if(!window.confirm("".concat(l," is already in the phonebook, overwrite number?")))return;var c=n.find((function(e){return e.name===l})),o=Object(r.a)(Object(r.a)({},c),{},{number:v});s.update(c.id,o).then((function(e){a(n.map((function(t){return t.id!==e.id?t:e}))),L("Updated '".concat(c.name,"' succesfully"),"good"),d(""),x("")})).catch((function(e){L("The person '".concat(c.name,"' was already deleted on the server"),"bad"),a(n.filter((function(e){return e.id!==c.id})))}))}},newName:l,handleNameChange:function(e){d(e.target.value)},newNumber:v,handleNumberChange:function(e){x(e.target.value)}}),Object(b.jsx)(p,{text:"Entries"}),Object(b.jsx)(f,{htmlFor:"filter",label:"Filter by Name: ",type:"text",value:w,onChange:function(e){N(e.target.value)}}),Object(b.jsx)(h,{people:J,onDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Are you sure you want to delete '".concat(t.name,"'?"))&&s.remove(e).then((function(){L("Deleted '".concat(t.name,"' succesfully"),"good"),a(n.filter((function(t){return t.id!==e})))})).catch((function(e){L("The person '".concat(t.name,"' was already deleted on the server"),"bad"),a(n.filter((function(e){return e.id!==t.id})))}))}})]})};c.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.5c0046d7.chunk.js.map